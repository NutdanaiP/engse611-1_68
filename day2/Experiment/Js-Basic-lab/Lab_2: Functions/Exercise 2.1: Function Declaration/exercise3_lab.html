<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 3: Functions</title>
</head>
<body>
    <h1>JavaScript Functions</h1>
    
    <div>
        <input type="text" id="studentName" placeholder="ชื่อนักศึกษา" value="">
        <input type="number" id="score" placeholder="คะแนน" value="" min="0" max="100">
        <input type="number" id="weight" placeholder="น้ำหนัก (kg)" value="" min="1">
        <input type="number" id="height" placeholder="ส่วนสูง (cm)" value="" min="50">
        <button onclick="testFunctions()">ทดสอบ Functions</button>
    </div>
    
    <div id="result"></div>

    <script>
        // Function Declaration - ประกาศ Function
        function greetStudent(name) {
            return "สวัสดี " + name + "!";
        }

        // Function สำหรับคำนวณเกรด
        function calculateGrade(score) {
            if (score >= 80) {
                return "A";
            } else if (score >= 70) {
                return "B";
            } else if (score >= 60) {
                return "C";
            } else if (score >= 50) {
                return "D";
            } else {
                return "F";
            }
        }

        // Function สำหรับคำนวณค่าใช้จ่าย
        function calculateExpenses(tuition, dorm, food, transport) {
            let total = tuition + dorm + food + transport;
            return {
                monthly: total,
                yearly: total * 12,
                breakdown: {
                    tuition: tuition,
                    dorm: dorm,
                    food: food,
                    transport: transport
                }
            };
        }

        // Function คำนวณ BMI
        function calculateBMI(weightKg, heightCm) {
            let heightM = heightCm / 100; 
            let bmi = weightKg / (heightM * heightM);
            
            let category = "";
            if (bmi < 18.5) {
                category = "น้ำหนักน้อย / ผอม";
            } else if (bmi < 23) {
                category = "สมส่วน";
            } else if (bmi < 25) {
                category = "ท้วม / น้ำหนักเกิน";
            } else if (bmi < 30) {
                category = "อ้วนระดับ 1";
            } else {
                category = "อ้วนระดับ 2";
            }

            return { bmi: bmi.toFixed(2), category: category };
        }

        // Function ที่รับ parameter หลายตัว
        function summarizeInfo(name, grade, bmiObj, expenses) {
            return `
                นักศึกษา: ${name}<br>
                เกรด: ${grade}<br>
                BMI: ${bmiObj.bmi} (${bmiObj.category})<br>
                ค่าใช้จ่ายรายเดือน: ${expenses.monthly.toLocaleString()} บาท
            `;
        }

        // Function ที่เรียกใช้ Functions อื่น
        function testFunctions() {
            // ดึงค่าจาก input
            let name = document.getElementById('studentName').value;
            let score = parseInt(document.getElementById('score').value);
            let weight = parseFloat(document.getElementById('weight').value);
            let height = parseFloat(document.getElementById('height').value);
            
            // เรียกใช้ Functions
            let greeting = greetStudent(name);
            let grade = calculateGrade(score);
            let expenses = calculateExpenses(15000, 3000, 6000, 1500);
            let bmiObj = calculateBMI(weight, height);
            let summary = summarizeInfo(name, grade, bmiObj, expenses);
            
            // แสดงผล
            document.getElementById('result').innerHTML = `
                <h3>ผลลัพธ์:</h3>
                <p><strong>คำทักทาย:</strong> ${greeting}</p>
                <p><strong>คะแนน ${score} ได้เกรด:</strong> ${grade}</p>
                <h4>ค่าใช้จ่ายประมาณ:</h4>
                <ul>
                    <li>รายเดือน: ${expenses.monthly.toLocaleString()} บาท</li>
                    <li>รายปี: ${expenses.yearly.toLocaleString()} บาท</li>
                    <li>ค่าเทอม: ${expenses.breakdown.tuition.toLocaleString()} บาท</li>
                    <li>ค่าหอพัก: ${expenses.breakdown.dorm.toLocaleString()} บาท</li>
                </ul>
                <h4>BMI:</h4>
                <p>${bmiObj.bmi} (${bmiObj.category})</p>
                <h4>สรุป:</h4>
                <p>${summary}</p>
            `;
            
            // แสดงใน Console ด้วย
            console.log("=== Function Results ===");
            console.log("Greeting:", greeting);
            console.log("Grade:", grade);
            console.log("Expenses:", expenses);
            console.log("BMI:", bmiObj);
            console.log("Summary:", summary);
        }

        // ทดสอบ Functions เบื้องต้น
        console.log("=== Testing Functions ===");
        console.log(greetStudent("นักศึกษา"));
        console.log("Score 95 =", calculateGrade(95));
        console.log("Score 45 =", calculateGrade(45));
        console.log("BMI 65kg/170cm =", calculateBMI(65,170));
    </script>
</body>
</html>
