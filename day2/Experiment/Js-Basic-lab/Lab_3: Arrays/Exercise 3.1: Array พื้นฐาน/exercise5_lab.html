<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise 5: Array Methods</title>
</head>
<body>
    <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤</h1>

    <div>
      <input type="text" id="athleteName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏Å‡∏µ‡∏¨‡∏≤" />
      <input
        type="number"
        id="athleteTime"
        placeholder="‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)"
        step="0.01"
      />
      <input type="number" id="athleteComp" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô" />
      <br /><br />
      <button onclick="addAthlete()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤</button>
      <button onclick="removeAthlete()">‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</button>
      <button onclick="showAllAthletes()">‡πÅ‡∏™‡∏î‡∏á‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      <button onclick="searchAthlete()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤</button>
      <button onclick="showStats()">‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
    </div>

    <div id="result"></div>

    <script>
      // Array ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤ (Object)
      let athletes = [
        { name: "‡∏ó‡∏≠‡∏á‡∏î‡∏µ", bestTime: 12.5, competitions: 5 },
        { name: "‡∏™‡∏°‡∏´‡∏ß‡∏±‡∏á", bestTime: 11.8, competitions: 8 },
        { name: "‡∏™‡∏°‡∏´‡∏°‡∏≤‡∏¢", bestTime: 13.2, competitions: 3 },
        { name: "‡∏ö‡∏∏‡∏ç‡∏°‡∏µ", bestTime: 15.2, competitions: 1 },
        { name: "‡∏ö‡∏∏‡∏ç‡∏ä‡∏π", bestTime: 10.9, competitions: 10 },
      ];

      // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤ (push)
      function addAthlete() {
        const name = document.getElementById("athleteName").value.trim();
        const time = parseFloat(document.getElementById("athleteTime").value);
        const comp = parseInt(document.getElementById("athleteComp").value);

        if (!name || isNaN(time) || isNaN(comp)) {
          alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
          return;
        }

        athletes.push({ name: name, bestTime: time, competitions: comp });
        document.getElementById(
          "result"
        ).innerHTML = `<p>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤: ${name}</p>`;
      }

      // ‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (pop)
      function removeAthlete() {
        if (athletes.length > 0) {
          const removed = athletes.pop();
          document.getElementById(
            "result"
          ).innerHTML = `<p>‡∏•‡∏ö‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤: ${removed.name}</p>`;
        } else {
          document.getElementById(
            "result"
          ).innerHTML = `<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡πÉ‡∏´‡πâ‡∏•‡∏ö</p>`;
        }
      }

      // ‡πÅ‡∏™‡∏î‡∏á‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (join)
      function showAllAthletes() {
        if (athletes.length === 0) {
          document.getElementById(
            "result"
          ).innerHTML = `<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤</p>`;
          return;
        }

        let list = athletes
          .map(
            (a) =>
              `${a.name} - ‡πÄ‡∏ß‡∏•‡∏≤: ${a.bestTime}s, ‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô: ${a.competitions}`
          )
          .join("<br>");
        document.getElementById(
          "result"
        ).innerHTML = `<h3>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤ (${athletes.length} ‡∏Ñ‡∏ô)</h3>${list}`;
      }

      // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤ (filter)
      function searchAthlete() {
        const keyword = document.getElementById("athleteName").value.trim();
        if (!keyword) {
          alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤");
          return;
        }

        const found = athletes.filter((a) => a.name.includes(keyword));
        if (found.length > 0) {
          let list = found
            .map(
              (a) =>
                `${a.name} - ‡πÄ‡∏ß‡∏•‡∏≤: ${a.bestTime}s, ‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô: ${a.competitions}`
            )
            .join("<br>");
          document.getElementById("result").innerHTML = `<p>üîç ‡∏û‡∏ö:</p>${list}`;
        } else {
          document.getElementById(
            "result"
          ).innerHTML = `<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏ä‡∏∑‡πà‡∏≠ "${keyword}"</p>`;
        }
      }

      // ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (reduce)
      function showStats() {
        if (athletes.length === 0) {
          document.getElementById(
            "result"
          ).innerHTML = `<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤</p>`;
          return;
        }

        const totalTime = athletes.reduce((sum, a) => sum + a.bestTime, 0);
        const avgTime = totalTime / athletes.length;

        const totalComp = athletes.reduce((sum, a) => sum + a.competitions, 0);

        // ‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
        const fastest = athletes.reduce((prev, curr) =>
          prev.bestTime < curr.bestTime ? prev : curr
        );

        document.getElementById("result").innerHTML = `
        <h3>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h3>
        <ul>
          <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤: ${athletes.length}</li>
          <li>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: ${avgTime.toFixed(2)} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</li>
          <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏ß‡∏°: ${totalComp} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</li>
          <li>‡∏ô‡∏±‡∏Å‡∏Å‡∏£‡∏µ‡∏ë‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î: ${fastest.name} (${fastest.bestTime}s)</li>
        </ul>
      `;
      }

      console.log("=== Array of Athletes Demo ===", athletes);
    </script>
  </body>
</html>
